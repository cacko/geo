<app-loader *ngIf="$loading | async"></app-loader>
<mat-toolbar [class.fullview]="fullview">
    <section left>
        <button
            mat-icon-button
            fullview
            (click)="onFullView()"
        >
            <mat-icon>
                {{fullview ? 'visibility' : 'visibility_off'}}
            </mat-icon>
        </button>
        <button
            *ngIf="($download | async) as download"
            mat-icon-button
            (click)="downloadImage(download)"
        >
            <mat-icon>download</mat-icon>
        </button>
        <button
            mat-icon-button
            (click)="onRenew()"
        >
            <mat-icon>cached</mat-icon>
        </button>
    </section>

    <span class="spacer"></span>
    <section right>
        <mat-button-toggle-group
            [(ngModel)]="storage.mode"
            (click)="onModeSwitch($event)"
        >
            <mat-button-toggle
                value="{{queryMode.IP}}"
                aria-label="By IP"
            >
                <mat-icon>globe</mat-icon>
            </mat-button-toggle>
            <mat-button-toggle
                value="{{queryMode.GPS}}"
                aria-label
            >
                <mat-icon>my_location</mat-icon>
            </mat-button-toggle>
            <mat-button-toggle
                value="{{queryMode.MANUAL}}"
                aria-label
            >
                <mat-icon>edit_note</mat-icon>
            </mat-button-toggle>
        </mat-button-toggle-group>
        <app-error *ngIf="error"></app-error>
    </section>

</mat-toolbar>
<div
    class="container main"
    [class.fullview]="fullview"
>
    <app-geoview
        [locationbg]="$background | async"
        (backgroundSrc)="downloadSubject.next($event)"
    ></app-geoview>
    <router-outlet></router-outlet>
</div>
